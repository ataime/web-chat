{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      ws: null,\n      message: '',\n      messages: []\n    };\n  },\n  methods: {\n    connectWebSocket() {\n      this.ws = new WebSocket('ws://localhost:8000/ws');\n      this.ws.onmessage = e => {\n        this.messages.push(JSON.parse(e.data));\n      };\n      this.ws.onclose = () => {\n        console.log('WebSocket disconnected. Attempting to reconnect...');\n        setTimeout(() => {\n          this.connectWebSocket();\n        }, 5000); // 5 秒后重连\n      };\n    },\n\n    sendMessage() {\n      const msg = {\n        username: '用户',\n        message: this.message\n      };\n      this.ws.send(JSON.stringify(msg));\n      this.message = '';\n    }\n  },\n  created() {\n    this.connectWebSocket();\n  }\n};","map":{"version":3,"names":["data","ws","message","messages","methods","connectWebSocket","WebSocket","onmessage","e","push","JSON","parse","onclose","console","log","setTimeout","sendMessage","msg","username","send","stringify","created"],"sources":["/opt/chat-app/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <h1>群聊</h1>\n    <div id=\"chatbox\">\n      <div v-for=\"msg in messages\" :key=\"msg.time\">\n        <strong>{{ msg.username }}</strong>: {{ msg.message }}\n      </div>\n    </div>\n    <input v-model=\"message\" @keyup.enter=\"sendMessage\" placeholder=\"输入消息...\">\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      ws: null,\n      message: '',\n      messages: []\n    };\n  },\n\n\n  methods: {\n    connectWebSocket() {\n      this.ws = new WebSocket('ws://localhost:8000/ws');\n      this.ws.onmessage = (e) => {\n        this.messages.push(JSON.parse(e.data));\n      };\n      this.ws.onclose = () => {\n        console.log('WebSocket disconnected. Attempting to reconnect...');\n        setTimeout(() => {\n          this.connectWebSocket();\n        }, 5000); // 5 秒后重连\n      };\n    },\n\n    sendMessage() {\n      const msg = { username: '用户', message: this.message };\n      this.ws.send(JSON.stringify(msg));\n      this.message = '';\n    }\n  },\n\n  created() {\n    this.connectWebSocket();\n  }\n\n};\n</script>\n\n<style>\n#app {\n  text-align: center;\n}\n\n#chatbox {\n  height: 300px;\n  overflow-y: scroll;\n  border: 1px solid #ddd;\n  margin: auto;\n  padding: 10px;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n}\n</style>\n"],"mappings":";AAaA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,EAAE,EAAE,IAAI;MACRC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EAGDC,OAAO,EAAE;IACPC,gBAAgBA,CAAA,EAAG;MACjB,IAAI,CAACJ,EAAC,GAAI,IAAIK,SAAS,CAAC,wBAAwB,CAAC;MACjD,IAAI,CAACL,EAAE,CAACM,SAAQ,GAAKC,CAAC,IAAK;QACzB,IAAI,CAACL,QAAQ,CAACM,IAAI,CAACC,IAAI,CAACC,KAAK,CAACH,CAAC,CAACR,IAAI,CAAC,CAAC;MACxC,CAAC;MACD,IAAI,CAACC,EAAE,CAACW,OAAM,GAAI,MAAM;QACtBC,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;QACjEC,UAAU,CAAC,MAAM;UACf,IAAI,CAACV,gBAAgB,CAAC,CAAC;QACzB,CAAC,EAAE,IAAI,CAAC,EAAE;MACZ,CAAC;IACH,CAAC;;IAEDW,WAAWA,CAAA,EAAG;MACZ,MAAMC,GAAE,GAAI;QAAEC,QAAQ,EAAE,IAAI;QAAEhB,OAAO,EAAE,IAAI,CAACA;MAAQ,CAAC;MACrD,IAAI,CAACD,EAAE,CAACkB,IAAI,CAACT,IAAI,CAACU,SAAS,CAACH,GAAG,CAAC,CAAC;MACjC,IAAI,CAACf,OAAM,GAAI,EAAE;IACnB;EACF,CAAC;EAEDmB,OAAOA,CAAA,EAAG;IACR,IAAI,CAAChB,gBAAgB,CAAC,CAAC;EACzB;AAEF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}