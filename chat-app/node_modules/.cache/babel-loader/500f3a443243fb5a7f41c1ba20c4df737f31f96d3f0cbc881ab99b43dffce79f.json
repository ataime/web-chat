{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      ws: null,\n      message: '',\n      messages: []\n    };\n  },\n  created() {\n    this.ws = new WebSocket('ws://139.198.33.164:8000/ws');\n    this.ws.addEventListener('message', e => {\n      this.messages.push(JSON.parse(e.data));\n    });\n  },\n  methods: {\n    connectWebSocket() {\n      this.ws = new WebSocket('ws://localhost:8000/ws');\n      this.ws.onmessage = e => {\n        this.messages.push(JSON.parse(e.data));\n      };\n      this.ws.onclose = () => {\n        console.log('WebSocket disconnected. Attempting to reconnect...');\n        setTimeout(() => {\n          this.connectWebSocket();\n        }, 5000); // 5 秒后重连\n      };\n    },\n\n    sendMessage() {\n      const msg = {\n        username: '用户',\n        message: this.message\n      };\n      this.ws.send(JSON.stringify(msg));\n      this.message = '';\n    }\n  },\n  created() {\n    this.connectWebSocket();\n  }\n};","map":{"version":3,"names":["data","ws","message","messages","created","WebSocket","addEventListener","e","push","JSON","parse","methods","connectWebSocket","onmessage","onclose","console","log","setTimeout","sendMessage","msg","username","send","stringify"],"sources":["/opt/chat-app/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <h1>群聊</h1>\n    <div id=\"chatbox\">\n      <div v-for=\"msg in messages\" :key=\"msg.time\">\n        <strong>{{ msg.username }}</strong>: {{ msg.message }}\n      </div>\n    </div>\n    <input v-model=\"message\" @keyup.enter=\"sendMessage\" placeholder=\"输入消息...\">\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      ws: null,\n      message: '',\n      messages: []\n    };\n  },\n  created() {\n    this.ws = new WebSocket('ws://139.198.33.164:8000/ws');\n    this.ws.addEventListener('message', (e) => {\n      this.messages.push(JSON.parse(e.data));\n    });\n  },\n\n\n  methods: {\n    connectWebSocket() {\n      this.ws = new WebSocket('ws://localhost:8000/ws');\n      this.ws.onmessage = (e) => {\n        this.messages.push(JSON.parse(e.data));\n      };\n      this.ws.onclose = () => {\n        console.log('WebSocket disconnected. Attempting to reconnect...');\n        setTimeout(() => {\n          this.connectWebSocket();\n        }, 5000); // 5 秒后重连\n      };\n    },\n\n    sendMessage() {\n      const msg = { username: '用户', message: this.message };\n      this.ws.send(JSON.stringify(msg));\n      this.message = '';\n    }\n  },\n\n  created() {\n    this.connectWebSocket();\n  }\n\n};\n</script>\n\n<style>\n#app {\n  text-align: center;\n}\n\n#chatbox {\n  height: 300px;\n  overflow-y: scroll;\n  border: 1px solid #ddd;\n  margin: auto;\n  padding: 10px;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n}\n</style>\n"],"mappings":";AAaA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,EAAE,EAAE,IAAI;MACRC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACH,EAAC,GAAI,IAAII,SAAS,CAAC,6BAA6B,CAAC;IACtD,IAAI,CAACJ,EAAE,CAACK,gBAAgB,CAAC,SAAS,EAAGC,CAAC,IAAK;MACzC,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAACC,IAAI,CAACC,KAAK,CAACH,CAAC,CAACP,IAAI,CAAC,CAAC;IACxC,CAAC,CAAC;EACJ,CAAC;EAGDW,OAAO,EAAE;IACPC,gBAAgBA,CAAA,EAAG;MACjB,IAAI,CAACX,EAAC,GAAI,IAAII,SAAS,CAAC,wBAAwB,CAAC;MACjD,IAAI,CAACJ,EAAE,CAACY,SAAQ,GAAKN,CAAC,IAAK;QACzB,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAACC,IAAI,CAACC,KAAK,CAACH,CAAC,CAACP,IAAI,CAAC,CAAC;MACxC,CAAC;MACD,IAAI,CAACC,EAAE,CAACa,OAAM,GAAI,MAAM;QACtBC,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;QACjEC,UAAU,CAAC,MAAM;UACf,IAAI,CAACL,gBAAgB,CAAC,CAAC;QACzB,CAAC,EAAE,IAAI,CAAC,EAAE;MACZ,CAAC;IACH,CAAC;;IAEDM,WAAWA,CAAA,EAAG;MACZ,MAAMC,GAAE,GAAI;QAAEC,QAAQ,EAAE,IAAI;QAAElB,OAAO,EAAE,IAAI,CAACA;MAAQ,CAAC;MACrD,IAAI,CAACD,EAAE,CAACoB,IAAI,CAACZ,IAAI,CAACa,SAAS,CAACH,GAAG,CAAC,CAAC;MACjC,IAAI,CAACjB,OAAM,GAAI,EAAE;IACnB;EACF,CAAC;EAEDE,OAAOA,CAAA,EAAG;IACR,IAAI,CAACQ,gBAAgB,CAAC,CAAC;EACzB;AAEF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}